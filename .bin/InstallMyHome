#!/bin/bash

# コマンドの存在確認
chkcmd(){
    existcmd=`which $1`
    if [ "$?" -ne 0 ];then
        echo "${1}コマンドが見つかりません"
        exit
    fi
}

chkcmd zsh
chkcmd git 

# ディレクトリの存在確認
if [ ! -d "$HOME/.vim" ];then
    echo "$HOME/.vim not found. Auto Make it"
    mkdir "$HOME/.vim"
fi

if [ ! -d "$HOME/.vim/vimundo" ];then
    echo "$HOME/.vim/vimundo not found. Auto Make it"
    mkdir "$HOME/.vim/vimundo"
fi

if [ ! -d "$HOME/.zsh" ];then
    echo "$HOME/.zsh not found. Auto Make it"
    mkdir "$HOME/.zsh"
fi

if [ ! -d "$HOME/.trash" ];then
    echo "Make trash directory"
    mkdir "$HOME/.trash"
fi

# ファイルの存在確認
neobundle_readme="$HOME/.vim/bundle/neobundle.vim"
if [ ! -f "$neobundle_readme/README.md" ];then
    echo "Installing NeoBundle.."
    echo ""
    mkdir -p "$HOME/.vim/bundle"
    git clone https://github.com/Shougo/neobundle.vim.git $neobundle_readme
else
    (cd $neobundle_readme; git pull)
fi

# ファイルの存在確認
auto_fu_zsh="$HOME/.zsh/auto-fu.zsh"
if [ ! -f "$auto_fu_zsh" ];then
    echo "Installing auto-fu.zsh..."
    echo ""
    git clone https://github.com/hchbaw/auto-fu.zsh.git "$HOME/.zsh"
else
    (cd $zsh_auto_fu; git pull)
fi

# clang lib
if [ ! -f /usr/lib/libclang.so ]; then
    sudo aptitude install -y libclang1
    sudo ln -s /usr/lib/x86_64-linux-gnu/libclang.so.1 /usr/lib/libclang.so
fi

